const stateMessages = {
    "states": {
      "Alabama": {
        "message": "So, does everyone just sing 'Sweet Home Alabama' all day here, or what?"
      },
      "Alaska": {
        "message": "Wait, do I need a passport to be here? Isn't this, like, next to Russia?"
      },
      "Arizona": {
        "message": "How long till I see the Grand Canyon from here? Is it, like, right around the corner?"
      },
      "Arkansas": {
        "message": "So, do y'all actually wrestle with bears out here in The Natural State?"
      },
      "California": {
        "message": "Where's the Hollywood sign? I mean, I'm in California… it's gotta be nearby, right?"
      },
      "Colorado": {
        "message": "Wait, we're, like, a mile high already? How can you even breathe up here?"
      },
      "Connecticut": {
        "message": "This is where they wrote the Constitution, right? Can I see it?"
      },
      "Delaware": {
        "message": "So, you're like… the first state? What does that even mean? Were there other options?"
      },
      "Florida": {
        "message": "Do the alligators just, like, walk around here? Do you have to, like, wrestle them at the beach?"
      },
      "Georgia": {
        "message": "Is it true you have peaches growing on every corner? Can I just, like, pick one?"
      },
      "Hawaii": {
        "message": "Aloha means both 'hello' and 'goodbye,' right? So how do you know which one people mean?"
      },
      "Idaho": {
        "message": "So… where can I dig up a potato? Are there, like, potato fields everywhere?"
      },
      "Illinois": {
        "message": "Is Lincoln still, like, super famous here? Do you guys have Lincoln-themed parties?"
      },
      "Indiana": {
        "message": "The Crossroads of America? So, do all the roads meet here, or how does that work?"
      },
      "Iowa": {
        "message": "Do y'all just, like, live in corn mazes? Is it hard to find your way home?"
      },
      "Kansas": {
        "message": "So, where's Dorothy's house? Can I take the yellow brick road from here?"
      },
      "Kentucky": {
        "message": "Is there really a horse race every day here? And do they serve fried chicken at the finish line?"
      },
      "Louisiana": {
        "message": "Laissez les bons temps rouler? So, like, is everyone just in Mardi Gras mode all the time?"
      },
      "Maine": {
        "message": "So, do the lobsters just come right out of the ocean and onto your plate? Do they know they're famous?"
      },
      "Maryland": {
        "message": "If it's America in Miniature, where's the mini White House? Can I see that?"
      },
      "Massachusetts": {
        "message": "Boston Tea Party happened here, right? Is there still tea in the harbor or…?"
      },
      "Michigan": {
        "message": "Pure Michigan? So, does that mean the lakes are, like, 100% pure water?"
      },
      "Minnesota": {
        "message": "So, which lake is the best one out of the 10,000? Do they have names, or…?"
      },
      "Mississippi": {
        "message": "Is it hard to spell Mississippi if you live here? Or does it get easier?"
      },
      "Missouri": {
        "message": "So, I'm here, now show me! That's what y'all say, right?"
      },
      "Montana": {
        "message": "Is this Big Sky, like, actually bigger than other skies? Can you measure that?"
      },
      "Nebraska": {
        "message": "Nebraska Nice? So, if I cut in line, do y'all still smile and say 'have a nice day?'"
      },
      "Nevada": {
        "message": "So, is everything made of neon here, or just in Vegas? Can I sleep with the lights off?"
      },
      "New Hampshire": {
        "message": "Live Free or Die? Whoa, do I need a permit to stay free, or…?"
      },
      "New Jersey": {
        "message": "So, where's the garden part? I heard this is The Garden State, but all I see is highways."
      },
      "New Mexico": {
        "message": "Land of Enchantment? So, is there, like, magic stuff happening here or just pretty sunsets?"
      },
      "New York": {
        "message": "If I say 'I love New York,' does that make me a real New Yorker? Or do I have to yell at a cabbie too?"
      },
      "North Carolina": {
        "message": "First in Flight? So, are the planes here faster than everywhere else, or how's that work?"
      },
      "North Dakota": {
        "message": "Legendary? Like, who's the legend? Can I get a selfie with them?"
      },
      "Ohio": {
        "message": "The Heart of It All? So, is Ohio, like, the literal heart of the U.S.?"
      },
      "Oklahoma": {
        "message": "Native America? So, do you, like, see cowboys and Native Americans having duels in the street?"
      },
      "Oregon": {
        "message": "Dreamers welcome? So, does that mean I can daydream my way to a free coffee?"
      },
      "Pennsylvania": {
        "message": "The Keystone State – so does that mean everything else would fall apart without you guys?"
      },
      "Rhode Island": {
        "message": "How's it feel to be the smallest state? Does everyone just know each other?"
      },
      "South Carolina": {
        "message": "Smiling Faces, Beautiful Places – so, does everyone smile all the time here, even while driving?"
      },
      "South Dakota": {
        "message": "Great Faces, Great Places – do the faces on Mount Rushmore ever change expressions?"
      },
      "Tennessee": {
        "message": "The Volunteer State – so, do I have to volunteer to get anything, or do you still sell stuff?"
      },
      "Texas": {
        "message": "Don't Mess with Texas – but can I, like, mess with the BBQ at least?"
      },
      "Utah": {
        "message": "Life Elevated – so, does that mean everyone's, like, a little taller here? Or just the mountains?"
      },
      "Vermont": {
        "message": "Freedom and Unity – does that mean I'm free to eat as much maple syrup as I want?"
      },
      "Virginia": {
        "message": "Virginia is for Lovers – so, do you have to be in love to visit?"
      },
      "Washington": {
        "message": "The Evergreen State – so, is it, like, green here all year? Does winter even happen?"
      },
      "West Virginia": {
        "message": "Wild and Wonderful – so, do I need hiking boots or a party hat? Or both?"
      },
      "Wisconsin": {
        "message": "America's Dairyland – so, is there cheese just lying around everywhere? Like, can I grab some off the street?"
      },
      "Wyoming": {
        "message": "Forever West – does that mean, like, cowboys are still around, or is it just a vibe?"
      }
    },
    countries: {
      "Costa Rica": {
        "message": "Pura vida! Is it true that sloths are just hanging around everywhere?"
      },
      "Mexico": {
        "message": "¡Hola! Is it true that you can find a taco stand on every corner?"
      },
      "Canada": {
        "message": "Oh, Canada! Do you really say 'sorry' as often as they say you do, eh?"
      },
      "United Kingdom": {
        "message": "Cheerio! Is tea time still a sacred ritual, or is that just a stereotype?"
      },
      "Australia": {
        "message": "G'day mate! Are kangaroos really hopping down the streets in the cities?"
      },
      "Ireland": {
        "message": "Top o' the mornin'! Do leprechauns really guard all the pots of gold here?"
      },
      "France": {
        "message": "Bonjour! Is it true that everyone wears a beret and carries a baguette?"
      },
      "Italy": {
        "message": "Ciao bella! Does everyone here gesticulate wildly when they talk, or is that just in the movies?"
      },
      "Japan": {
        "message": "Konnichiwa! Are there really vending machines for everything, including used underwear?"
      },
      "Germany": {
        "message": "Guten Tag! Is it true that you can't jaywalk without getting stern looks from everyone?"
      },
      "Spain": {
        "message": "¡Hola! Do you really take a siesta every day, or is that just a tourist myth?"
      },
      "Brazil": {
        "message": "Olá! Is it true that everyone here can do the samba as soon as they learn to walk?"
      },
      "Netherlands": {
        "message": "Hallo! Do you really need a boat license to navigate all these canals?"
      },
      "India": {
        "message": "Namaste! Is it true that cows have the right of way on all roads, even highways?"
      },
      "New Zealand": {
        "message": "Kia ora! Are there really more sheep than people here, or is that just pulling my wool?"
      }
    }
  };

  function initLocationInsights() {
    console.log('initLocationInsights function called');
    const messageElement = document.getElementById('location-message');

    if (!messageElement) {
      console.error('location-message element not found');
      return;
    }

    messageElement.textContent = 'Fetching your location...';

    fetch('https://ipapi.co/json/')
      .then(response => {
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json();
      })
      .then(data => {
        console.log('Location data:', data);
        const city = data.city || 'Unknown City';
        const state = data.region !== 'Unknown State' ? data.region : '';
        const country = data.country_name || 'Unknown Country';
        
        let locationString = [city, state, country].filter(Boolean).join(', ');
        let message = `Hello visitor from ${locationString}! `;
        
        if (country === 'United States') {
          const stateKey = Object.keys(stateMessages.states).find(key => 
            key.toLowerCase() === state.toLowerCase()
          );
          
          if (stateKey) {
            message += stateMessages.states[stateKey].message;
          } else {
            message += `Welcome to ${state}! We don't have a special message for you yet, but we're sure it's a great place!`;
          }
        } else {
          console.log('Searching for country:', country);
          console.log('Available countries:', Object.keys(stateMessages.countries));
          const countryKey = Object.keys(stateMessages.countries).find(key => 
            key.toLowerCase() === country.toLowerCase()
          );
          
          if (countryKey) {
            message += stateMessages.countries[countryKey].message;
          } else {
            message += `We don't have a special message for you yet, but we'd love to hear about your local customs and traditions!`;
          }
        }
        
        // Duplicate the message to ensure smooth looping
        message = `${message} • `.repeat(3);
        
        console.log('Final message:', message);
        messageElement.textContent = message;
        
        console.log('State from API:', state);
        console.log('Available states:', Object.keys(stateMessages.states));
      })
      .catch(error => {
        console.error('Error fetching location data:', error);
        messageElement.textContent = `Unable to fetch location information. Please check your internet connection and try refreshing the page.`;
      });
  }

  document.addEventListener('DOMContentLoaded', initLocationInsights);


  document.addEventListener('DOMContentLoaded', function() {
    const avatar = document.querySelector('.linkedin-avatar');
    const links = document.querySelectorAll('.icon-links a');

    links.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const url = this.href;

        avatar.classList.add('spin-off');

        setTimeout(() => {
          window.open(url, '_blank');
          avatar.classList.remove('spin-off');
        }, 1000);
      });
    });
  });
